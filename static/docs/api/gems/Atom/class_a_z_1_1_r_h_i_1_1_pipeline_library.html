<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Open 3D Engine Atom Gem API Reference: AZ::RHI::PipelineLibrary Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open 3D Engine Atom Gem API Reference
   &#160;<span id="projectnumber">2107.1 (Developer Preview)</span>
   </div>
   <div id="projectbrief">O3DE is an open-source, fully-featured, high-fidelity, modular 3D engine for building games and simulations, available to every industry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_a_z.html">AZ</a></li><li class="navelem"><b>RHI</b></li><li class="navelem"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_a_z_1_1_r_h_i_1_1_pipeline_library-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AZ::RHI::PipelineLibrary Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;PipelineLibrary.h&gt;</code></p>

<p>Inherits <a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">AZ::RHI::DeviceObject</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae07c9c54fdc440cfc53c3f632cd5ac61"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae07c9c54fdc440cfc53c3f632cd5ac61"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a>,&quot;{843579BE-57E4-4527-AB00-C0217885AEA9}&quot;)</td></tr>
<tr class="separator:ae07c9c54fdc440cfc53c3f632cd5ac61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d71f53f4b9a0cebc4a875dda124409"><td class="memItemLeft" align="right" valign="top">ResultCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#a15d71f53f4b9a0cebc4a875dda124409">Init</a> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp;device, const <a class="el" href="struct_a_z_1_1_r_h_i_1_1_pipeline_library_descriptor.html">PipelineLibraryDescriptor</a> &amp;descriptor)</td></tr>
<tr class="separator:a15d71f53f4b9a0cebc4a875dda124409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593a097c7f798aabb5b9409a8a4e853e"><td class="memItemLeft" align="right" valign="top">ResultCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#a593a097c7f798aabb5b9409a8a4e853e">MergeInto</a> (AZStd::span&lt; const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> *const  &gt; librariesToMerge)</td></tr>
<tr class="separator:a593a097c7f798aabb5b9409a8a4e853e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56974a3ff575648bc7af9fca0918ddf4"><td class="memItemLeft" align="right" valign="top">ConstPtr&lt; <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#a56974a3ff575648bc7af9fca0918ddf4">GetSerializedData</a> () const </td></tr>
<tr class="separator:a56974a3ff575648bc7af9fca0918ddf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d89c9f28f7fc4a1c0811e8e23726f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8d89c9f28f7fc4a1c0811e8e23726f1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#ac8d89c9f28f7fc4a1c0811e8e23726f1">SaveSerializedData</a> (const AZStd::string &amp;filePath) const </td></tr>
<tr class="memdesc:ac8d89c9f28f7fc4a1c0811e8e23726f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the platform-specific data to disk using the filePath provided. This is done through RHI backend drivers. <br/></td></tr>
<tr class="separator:ac8d89c9f28f7fc4a1c0811e8e23726f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa738e5c9ae6a88424c4700a956a65b23"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa738e5c9ae6a88424c4700a956a65b23"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html#aa738e5c9ae6a88424c4700a956a65b23">IsMergeRequired</a> () const </td></tr>
<tr class="memdesc:aa738e5c9ae6a88424c4700a956a65b23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the current library need to be merged. <br/></td></tr>
<tr class="separator:aa738e5c9ae6a88424c4700a956a65b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_z_1_1_r_h_i_1_1_device_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">AZ::RHI::DeviceObject</a></td></tr>
<tr class="memitem:a1b46c9e76b49ec5a7b69c4cfafb6cebd inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b46c9e76b49ec5a7b69c4cfafb6cebd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html">DeviceObject</a>,&quot;{17D34F71-944C-4AF5-9823-627474C4C0A6}&quot;, Object)</td></tr>
<tr class="separator:a1b46c9e76b49ec5a7b69c4cfafb6cebd inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00cb1ac6436a4100cdfba458a959d8c inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af00cb1ac6436a4100cdfba458a959d8c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html#af00cb1ac6436a4100cdfba458a959d8c">IsInitialized</a> () const </td></tr>
<tr class="memdesc:af00cb1ac6436a4100cdfba458a959d8c inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the device object is initialized. <br/></td></tr>
<tr class="separator:af00cb1ac6436a4100cdfba458a959d8c inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf10f418d4ddfcb1ba06994269a0dbfc inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device_object.html#abf10f418d4ddfcb1ba06994269a0dbfc">GetDevice</a> () const </td></tr>
<tr class="separator:abf10f418d4ddfcb1ba06994269a0dbfc inherit pub_methods_class_a_z_1_1_r_h_i_1_1_device_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_z_1_1_r_h_i_1_1_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html">AZ::RHI::Object</a></td></tr>
<tr class="memitem:a458422c2e78bdc3d64d901e1c347ab0b inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a458422c2e78bdc3d64d901e1c347ab0b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AZ_RTTI</b> (<a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html">Object</a>,&quot;{E43378F1-2331-4173-94B8-990ED20E6003}&quot;)</td></tr>
<tr class="separator:a458422c2e78bdc3d64d901e1c347ab0b inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9486615a64c9e9f0ce2c6eb0bbab2d35 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9486615a64c9e9f0ce2c6eb0bbab2d35"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html#a9486615a64c9e9f0ce2c6eb0bbab2d35">SetName</a> (const Name &amp;name)</td></tr>
<tr class="memdesc:a9486615a64c9e9f0ce2c6eb0bbab2d35 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the name of the object. <br/></td></tr>
<tr class="separator:a9486615a64c9e9f0ce2c6eb0bbab2d35 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190fbf8596c65545c2bb2d713c7f7c89 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a190fbf8596c65545c2bb2d713c7f7c89"></a>
const Name &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html#a190fbf8596c65545c2bb2d713c7f7c89">GetName</a> () const </td></tr>
<tr class="memdesc:a190fbf8596c65545c2bb2d713c7f7c89 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name set on the object by SetName. <br/></td></tr>
<tr class="separator:a190fbf8596c65545c2bb2d713c7f7c89 inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cab6a10612d7fdf473957d9f5b8d9d inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40cab6a10612d7fdf473957d9f5b8d9d"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_r_h_i_1_1_object.html#a40cab6a10612d7fdf473957d9f5b8d9d">use_count</a> ()</td></tr>
<tr class="memdesc:a40cab6a10612d7fdf473957d9f5b8d9d inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current use count of the object. <br/></td></tr>
<tr class="separator:a40cab6a10612d7fdf473957d9f5b8d9d inherit pub_methods_class_a_z_1_1_r_h_i_1_1_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state.html">PipelineState</a> initialization is an expensive operation on certain platforms. If multiple pipeline states are created with little variation between them, the contents are still duplicated. This class is an allocation context for pipeline states, provided at <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state.html#a7f271720cb9796cfdddb6fbdcce9f9af">PipelineState::Init</a>, which will perform de-duplication of internal pipeline state components and cache the results.</p>
<p>Practically speaking, if many pipeline states are created with shared data between them (e.g. permutations of the same shader), then providing a <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance will reduce the memory footprint and cost of compilation.</p>
<p>Additionally, the <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> is able to serialize the internal driver-contents to and from an opaque data blob. This enables building up a pipeline state cache on disk, which can dramatically reduce pipeline state compilation cost when run from a pre-warmed cache.</p>
<p><a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> is thread-safe, in the sense that it will take a lock during compilation. It is possible to initialize pipeline states across threads using the same <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance, but this will result in the two calls serializing on the mutex. Instead, see <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_state_cache.html">PipelineStateCache</a> which stores a <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> instance per thread to avoid this contention. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a56974a3ff575648bc7af9fca0918ddf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ConstPtr&lt;<a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a>&gt; AZ::RHI::PipelineLibrary::GetSerializedData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serializes the platform-specific data and returns it as a new <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library_data.html">PipelineLibraryData</a> instance. The data is opaque to the user and can only be used to re-initialize the library. Use this method to extract serialized data prior to application shutdown, save it to disk, and use it when initializing on subsequent runs. </p>

</div>
</div>
<a class="anchor" id="a15d71f53f4b9a0cebc4a875dda124409"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ResultCode AZ::RHI::PipelineLibrary::Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_z_1_1_r_h_i_1_1_device.html">Device</a> &amp;&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_a_z_1_1_r_h_i_1_1_pipeline_library_descriptor.html">PipelineLibraryDescriptor</a> &amp;&#160;</td>
          <td class="paramname"><em>descriptor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the pipeline library from a platform-specific data payload. This data is generated by calling GetSerializedData in a previous run of the application. When run for the first time, the serialized data should be empty. When the application completes, the library can be serialized and the contents saved to disk. Subsequent loads will experience much faster pipeline state creation times (on supported platforms). On success, the library is transitioned to the initialized state. On failure, the library remains uninitialized. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">descriptor</td><td>The descriptor needed to init the <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a593a097c7f798aabb5b9409a8a4e853e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ResultCode AZ::RHI::PipelineLibrary::MergeInto </td>
          <td>(</td>
          <td class="paramtype">AZStd::span&lt; const <a class="el" href="class_a_z_1_1_r_h_i_1_1_pipeline_library.html">PipelineLibrary</a> *const  &gt;&#160;</td>
          <td class="paramname"><em>librariesToMerge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Merges the contents of other libraries into this library. This method must be called on an initialized library. A common use case for this method is to construct thread-local libraries and merge them into a single unified library. The serialized data can then be extracted from the unified library. An error code is returned on failure and the behavior is as if the method was never called. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Gems/Atom/RHI/Code/Include/Atom/RHI/PipelineLibrary.h</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 10 2023 22:41:37 for Open 3D Engine Atom Gem API Reference by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
