<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Open 3D Engine AzCore API Reference: AZ::IO::CompressorZLib Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open 3D Engine AzCore API Reference
   &#160;<span id="projectnumber">2107.1 (Developer Preview)</span>
   </div>
   <div id="projectbrief">O3DE is an open-source, fully-featured, high-fidelity, modular 3D engine for building games and simulations, available to every industry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_a_z.html">AZ</a></li><li class="navelem"><a class="el" href="namespace_a_z_1_1_i_o.html">IO</a></li><li class="navelem"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html">CompressorZLib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_a_z_1_1_i_o_1_1_compressor_z_lib-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AZ::IO::CompressorZLib Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;CompressorZLib.h&gt;</code></p>

<p>Inherits <a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html">AZ::IO::Compressor</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab505a30faa262b10d9091cd7cf9fa6a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab505a30faa262b10d9091cd7cf9fa6a3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AZ_CLASS_ALLOCATOR</b> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html">CompressorZLib</a>, <a class="el" href="class_a_z_1_1_system_allocator.html">AZ::SystemAllocator</a>)</td></tr>
<tr class="separator:ab505a30faa262b10d9091cd7cf9fa6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46490294df551c9ddf7d6950c9502780"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a46490294df551c9ddf7d6950c9502780">CompressorZLib</a> (unsigned int decompressionCachePerStream=64 *1024, unsigned int dataBufferSize=128 *1024)</td></tr>
<tr class="separator:a46490294df551c9ddf7d6950c9502780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fedc4b85b00fb0c13a778d7f3ad3c87"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7fedc4b85b00fb0c13a778d7f3ad3c87"></a>
AZ::u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a7fedc4b85b00fb0c13a778d7f3ad3c87">GetTypeId</a> () const override</td></tr>
<tr class="memdesc:a7fedc4b85b00fb0c13a778d7f3ad3c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return compressor type id. <br/></td></tr>
<tr class="separator:a7fedc4b85b00fb0c13a778d7f3ad3c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84c373801ec4acf42d6da66042b5e10"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad84c373801ec4acf42d6da66042b5e10"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#ad84c373801ec4acf42d6da66042b5e10">ReadHeaderAndData</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream, AZ::u8 *data, unsigned int dataSize) override</td></tr>
<tr class="memdesc:ad84c373801ec4acf42d6da66042b5e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when we open a stream to Read for the first time. Data contains the first. dataSize &lt;= m_maxHeaderSize. <br/></td></tr>
<tr class="separator:ad84c373801ec4acf42d6da66042b5e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c18af108e4ff39cd961c2cd5ebf0c8c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c18af108e4ff39cd961c2cd5ebf0c8c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a9c18af108e4ff39cd961c2cd5ebf0c8c">WriteHeaderAndData</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream) override</td></tr>
<tr class="memdesc:a9c18af108e4ff39cd961c2cd5ebf0c8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when we are about to start writing to a compressed stream. <br/></td></tr>
<tr class="separator:a9c18af108e4ff39cd961c2cd5ebf0c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd8085a3076158896d9eae9917b4be2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aefd8085a3076158896d9eae9917b4be2"></a>
SizeType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#aefd8085a3076158896d9eae9917b4be2">Read</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream, SizeType byteSize, SizeType offset, void *buffer) override</td></tr>
<tr class="memdesc:aefd8085a3076158896d9eae9917b4be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forwarded function from the Device when we from a compressed stream. <br/></td></tr>
<tr class="separator:aefd8085a3076158896d9eae9917b4be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c1e2b59f09ffc28bed9253f9e2bf0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1c1e2b59f09ffc28bed9253f9e2bf0c"></a>
SizeType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#af1c1e2b59f09ffc28bed9253f9e2bf0c">Write</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream, SizeType byteSize, const void *data, SizeType offset=SizeType(-1)) override</td></tr>
<tr class="memdesc:af1c1e2b59f09ffc28bed9253f9e2bf0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forwarded function from the Device when we write to a compressed stream. <br/></td></tr>
<tr class="separator:af1c1e2b59f09ffc28bed9253f9e2bf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5611c9f76bf029311dac2d22b5574efc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5611c9f76bf029311dac2d22b5574efc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a5611c9f76bf029311dac2d22b5574efc">WriteSeekPoint</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream) override</td></tr>
<tr class="memdesc:a5611c9f76bf029311dac2d22b5574efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a seek point. <br/></td></tr>
<tr class="separator:a5611c9f76bf029311dac2d22b5574efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41121b4477435a9548bdfb40d5ec0df9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41121b4477435a9548bdfb40d5ec0df9"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a41121b4477435a9548bdfb40d5ec0df9">StartCompressor</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream, int compressionLevel, SizeType autoSeekDataSize) override</td></tr>
<tr class="memdesc:a41121b4477435a9548bdfb40d5ec0df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set auto seek point even dataSize bytes. <br/></td></tr>
<tr class="separator:a41121b4477435a9548bdfb40d5ec0df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73412e79dfa314998095e8f8f65c575e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73412e79dfa314998095e8f8f65c575e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a73412e79dfa314998095e8f8f65c575e">Close</a> (<a class="el" href="class_a_z_1_1_i_o_1_1_compressor_stream.html">CompressorStream</a> *stream) override</td></tr>
<tr class="memdesc:a73412e79dfa314998095e8f8f65c575e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just before we close the stream. All compression data will be flushed and finalized. (You can't add data afterwards). <br/></td></tr>
<tr class="separator:a73412e79dfa314998095e8f8f65c575e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_a_z_1_1_i_o_1_1_compressor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_z_1_1_i_o_1_1_compressor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html">AZ::IO::Compressor</a></td></tr>
<tr class="memitem:a366a7e3ac38d0e42de73ef1c27f93e0b inherit pub_methods_class_a_z_1_1_i_o_1_1_compressor"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a366a7e3ac38d0e42de73ef1c27f93e0b"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html#a366a7e3ac38d0e42de73ef1c27f93e0b">~Compressor</a> ()</td></tr>
<tr class="memdesc:a366a7e3ac38d0e42de73ef1c27f93e0b inherit pub_methods_class_a_z_1_1_i_o_1_1_compressor"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we open a stream to check if it's compressed we read the first m_maxHeaderSize bytes. <br/></td></tr>
<tr class="separator:a366a7e3ac38d0e42de73ef1c27f93e0b inherit pub_methods_class_a_z_1_1_i_o_1_1_compressor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4c7b0cf49fdd736dfac2cd547bdcf418"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c7b0cf49fdd736dfac2cd547bdcf418"></a>
static AZ::u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html#a4c7b0cf49fdd736dfac2cd547bdcf418">TypeId</a> ()</td></tr>
<tr class="memdesc:a4c7b0cf49fdd736dfac2cd547bdcf418"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return compressor type id. <br/></td></tr>
<tr class="separator:a4c7b0cf49fdd736dfac2cd547bdcf418"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_a_z_1_1_i_o_1_1_compressor"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_a_z_1_1_i_o_1_1_compressor')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html">AZ::IO::Compressor</a></td></tr>
<tr class="memitem:a1ced722d851cec9e08ec400d77997759 inherit pub_types_class_a_z_1_1_i_o_1_1_compressor"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ced722d851cec9e08ec400d77997759"></a>
typedef AZ::u64&#160;</td><td class="memItemRight" valign="bottom"><b>SizeType</b></td></tr>
<tr class="separator:a1ced722d851cec9e08ec400d77997759 inherit pub_types_class_a_z_1_1_i_o_1_1_compressor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_class_a_z_1_1_i_o_1_1_compressor"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_class_a_z_1_1_i_o_1_1_compressor')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html">AZ::IO::Compressor</a></td></tr>
<tr class="memitem:a4999e9e475339033be24abffe0b8d3d1 inherit pub_static_attribs_class_a_z_1_1_i_o_1_1_compressor"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4999e9e475339033be24abffe0b8d3d1"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><b>m_maxHeaderSize</b> = 4096</td></tr>
<tr class="separator:a4999e9e475339033be24abffe0b8d3d1 inherit pub_static_attribs_class_a_z_1_1_i_o_1_1_compressor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_a_z_1_1_z_lib.html">ZLib</a> compressor implementation. Note: As of now the <a class="el" href="class_a_z_1_1_i_o_1_1_compressor_z_lib.html">CompressorZLib</a> is the only supported compressor. We can move much of the caching functionality into the base <a class="el" href="class_a_z_1_1_i_o_1_1_compressor.html">Compressor</a> class to be shared. Please do so when you have an actual need to implement another compressor, don't just copy and paste. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a46490294df551c9ddf7d6950c9502780"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AZ::IO::CompressorZLib::CompressorZLib </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>decompressionCachePerStream</em> = <code>64&#160;*1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dataBufferSize</em> = <code>128&#160;*1024</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">decompressionCachePerStream</td><td>cache of decompressed data stored per stream, the more streams you have open the more memory it will use, You can use 0 size too to save memory, but every read will happen with decompression from the closest seek point. That might be fine if we use stream read cache and it matches the size of the seek points (you will need to make sure of that), otherwise the extra cache can be useful. We can convert this system to use pools of caches, but as of now this should be fine. </td></tr>
    <tr><td class="paramname">dataBufferSize</td><td>we have one compressor per device, only one stream can read/write at a time and the data buffer is shared for <a class="el" href="namespace_a_z_1_1_i_o.html" title="PathView implementation. ">IO</a> operations, the buffer is refCounted and existing only when we read/write compressed streams. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Code/Framework/AzCore/AzCore/IO/CompressorZLib.h</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 10 2023 22:40:41 for Open 3D Engine AzCore API Reference by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
