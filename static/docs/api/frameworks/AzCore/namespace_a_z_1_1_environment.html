<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Open 3D Engine AzCore API Reference: AZ::Environment Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open 3D Engine AzCore API Reference
   &#160;<span id="projectnumber">2107.1 (Developer Preview)</span>
   </div>
   <div id="projectbrief">O3DE is an open-source, fully-featured, high-fidelity, modular 3D engine for building games and simulations, available to every industry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_a_z.html">AZ</a></li><li class="navelem"><a class="el" href="namespace_a_z_1_1_environment.html">Environment</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AZ::Environment Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_z_1_1_environment_1_1_allocator_interface.html">AllocatorInterface</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a90be0cd81f50ae6cc1d24697d7c08c"><td class="memTemplParams" colspan="2">template&lt;typename T , class... Args&gt; </td></tr>
<tr class="memitem:a7a90be0cd81f50ae6cc1d24697d7c08c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> (u32 guid, Args &amp;&amp;...args)</td></tr>
<tr class="separator:a7a90be0cd81f50ae6cc1d24697d7c08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4409343b6ad753a9638f844ca556a961"><td class="memTemplParams" colspan="2">template&lt;typename T , class... Args&gt; </td></tr>
<tr class="memitem:a4409343b6ad753a9638f844ca556a961"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#a4409343b6ad753a9638f844ca556a961">CreateVariable</a> (const char *uniqueName, Args &amp;&amp;...args)</td></tr>
<tr class="separator:a4409343b6ad753a9638f844ca556a961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac168cbf9a6487655d3c688884a29f96e"><td class="memTemplParams" colspan="2">template&lt;typename T , class... Args&gt; </td></tr>
<tr class="memitem:ac168cbf9a6487655d3c688884a29f96e"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#ac168cbf9a6487655d3c688884a29f96e">CreateVariableEx</a> (u32 guid, bool isConstruct, bool isTransferOwnership, Args &amp;&amp;...args)</td></tr>
<tr class="separator:ac168cbf9a6487655d3c688884a29f96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd85de614a08bb4ab2372ae1be99de6"><td class="memTemplParams" colspan="2"><a class="anchor" id="aefd85de614a08bb4ab2372ae1be99de6"></a>
template&lt;typename T , class... Args&gt; </td></tr>
<tr class="memitem:aefd85de614a08bb4ab2372ae1be99de6"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#aefd85de614a08bb4ab2372ae1be99de6">CreateVariableEx</a> (const char *uniqueName, bool isConstruct, bool isTransferOwnership, Args &amp;&amp;...args)</td></tr>
<tr class="memdesc:aefd85de614a08bb4ab2372ae1be99de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="namespace_a_z_1_1_environment.html#ac168cbf9a6487655d3c688884a29f96e">CreateVariableEx</a> and <a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> with advanced control parameters. <br/></td></tr>
<tr class="separator:aefd85de614a08bb4ab2372ae1be99de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e0ad77850071aa566c4a665d6903c3"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ae7e0ad77850071aa566c4a665d6903c3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#ae7e0ad77850071aa566c4a665d6903c3">FindVariable</a> (u32 guid)</td></tr>
<tr class="separator:ae7e0ad77850071aa566c4a665d6903c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bac66b64675a5f5236e530441c992fc"><td class="memTemplParams" colspan="2"><a class="anchor" id="a7bac66b64675a5f5236e530441c992fc"></a>
template&lt;typename T &gt; </td></tr>
<tr class="memitem:a7bac66b64675a5f5236e530441c992fc"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#a7bac66b64675a5f5236e530441c992fc">FindVariable</a> (const char *uniqueName)</td></tr>
<tr class="memdesc:a7bac66b64675a5f5236e530441c992fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="namespace_a_z_1_1_environment.html#ae7e0ad77850071aa566c4a665d6903c3">FindVariable</a> but using a unique string as input. Please check <a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> for more information about hot strings are used internally. <br/></td></tr>
<tr class="separator:a7bac66b64675a5f5236e530441c992fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e166459c815e5af5d7ed30f014f31c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a22e166459c815e5af5d7ed30f014f31c"></a>
O3DEKERNEL_API EnvironmentInstance&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#a22e166459c815e5af5d7ed30f014f31c">GetInstance</a> ()</td></tr>
<tr class="memdesc:a22e166459c815e5af5d7ed30f014f31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the environment so you can share it with AttachEnvironment. <br/></td></tr>
<tr class="separator:a22e166459c815e5af5d7ed30f014f31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf2658281dc08f94db0e6a995c368152"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf2658281dc08f94db0e6a995c368152"></a>
const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_a_z_1_1_environment.html#acf2658281dc08f94db0e6a995c368152">GetModuleId</a> ()</td></tr>
<tr class="memdesc:acf2658281dc08f94db0e6a995c368152"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns module id (non persistent) <br/></td></tr>
<tr class="separator:acf2658281dc08f94db0e6a995c368152"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="namespace_a_z_1_1_environment.html">Environment</a> is a module "global variable" provider. It's used when you want to share globals (which should happen as little as possible) between modules/DLLs.</p>
<p>The environment is automatically created on demand. This is why if you want to share the environment between modules you should call AttachEnvironment before anything else that will use the environment. At a high level the environment is basically a hash table with variables&lt;-&gt;guid. The environment doesn't own variables they are managed though reference counting.</p>
<p>All environment "internal" allocations are directly allocated from OS C heap, so we don't use any allocators as they use the environment themselves.</p>
<p>You can create/destroy variables from multiple threads, HOWEVER accessing the data of the environment is NOT. If you want to access your variable across threads you will need to add extra synchronization, which is the same if your global was "static".</p>
<p>Using the environment with POD types is straight and simple. On the other hand when your environment variable has virtual methods, things become more complex. We advice that you avoid this as much as possible. When a variable has virtual function, even if we shared environment and memory allocations, the variable will still be "bound" to the module as it's vtable will point inside the module. Which mean that if we unload the module we have to destroy your variable. The system handles this automatically if your class has virtual functions. You can still keep your variables, but if you try to access the data you will trigger an assert, unless you recreated the variable from one of the exiting modules.</p>
<dl class="section note"><dt>Note</dt><dd>we use class for the <a class="el" href="namespace_a_z_1_1_environment.html">Environment</a> (instead of simple global function) so can easily friend it to create variables where the ctor/dtor are protected that way you need to add friend <a class="el" href="namespace_a_z_1_1_environment.html">AZ::Environment</a> and that's it. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7a90be0cd81f50ae6cc1d24697d7c08c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , class... Args&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt; AZ::Environment::CreateVariable </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an environmental variable, if the variable already exists just returns the exiting variable. If not it will create one and return the new variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">guid</td><td>- unique persistent id for the variable. It will be matched between modules/different and compilations. The returned variable will be release and it's memory freed when the last reference to it is gone. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4409343b6ad753a9638f844ca556a961"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , class... Args&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt; AZ::Environment::CreateVariable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uniqueName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Same as <a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> except it uses a unique string to identify the variable, this string will be converted to <a class="el" href="class_a_z_1_1_crc32.html">Crc32</a> and used a guid. </p>

</div>
</div>
<a class="anchor" id="ac168cbf9a6487655d3c688884a29f96e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , class... Args&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt; AZ::Environment::CreateVariableEx </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isConstruct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isTransferOwnership</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advanced <a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> where you have extra parameters to control the creation and life cycle of the variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">guid</td><td>- same as <a class="el" href="namespace_a_z_1_1_environment.html#a7a90be0cd81f50ae6cc1d24697d7c08c">CreateVariable</a> guid </td></tr>
    <tr><td class="paramname">isConstruct</td><td>- if we should actually "create" the variable. If false we will just register the variable holder, but EnvironmentVariable&lt;T&gt;::IsConstructed will return false. you will need to manually create it later with EnvironmentVariable&lt;T&gt;::Construct(). </td></tr>
    <tr><td class="paramname">isTransferOwnership</td><td>- if we can transfer ownership of the variable across modules. For example Module_1 created the variable and Module_2 is using it. If is isTransferOwnership is true if you unload Module_1, Module_2 will get the ownership. If isTransferOwnership is false, it will destroy the variable and any attempt from Module_2 of using will trigger and error (until somebody else creates it again). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae7e0ad77850071aa566c4a665d6903c3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_z_1_1_environment_variable.html">EnvironmentVariable</a>&lt; T &gt; AZ::Environment::FindVariable </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>guid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a variable exist if so a valid variable is returned, otherwise the resulting variable pointer will be null. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 10 2023 22:40:41 for Open 3D Engine AzCore API Reference by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
